"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6942],{6942:(L,h,a)=>{a.r(h),a.d(h,{routes:()=>E});var r=a(7582),e=a(3176),p=a(2340),s=a(8408),u=a(6805),P=a(2961);function m(i,d){const t="object"==typeof d;return new Promise((o,l)=>{const c=new P.Hp({next:y=>{o(y),c.unsubscribe()},error:l,complete:()=>{t?o(d.defaultValue):l(new u.K)}});i.subscribe(c)})}var n=a(8274),g=a(529);const E=[{path:"",component:(()=>{class i{constructor(t){this.http=t,this.processSheet="willReady",this.processFlow="willReady",this.processApplePay="willReady",this.processGooglePay="willReady",this.isApplePayAvailable=!1,this.isGooglePayAvailable=!1}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){e.hK.addListener(e.YG.Loaded,()=>{this.processSheet="Ready",console.log("PaymentSheetEventsEnum.Loaded")}),e.hK.addListener(e.YG.FailedToLoad,()=>{console.log("PaymentSheetEventsEnum.FailedToLoad")}),e.hK.addListener(e.YG.Completed,()=>{this.processSheet="willReady",console.log("PaymentSheetEventsEnum.Completed")}),e.hK.addListener(e.YG.Canceled,()=>{this.processSheet="willReady",console.log("PaymentSheetEventsEnum.Canceled")}),e.hK.addListener(e.YG.Failed,()=>{this.processSheet="willReady",console.log("PaymentSheetEventsEnum.Failed")}),e.hK.addListener(e.I.Loaded,()=>{this.processFlow="Ready",console.log("PaymentFlowEventsEnum.Loaded")}),e.hK.addListener(e.I.FailedToLoad,()=>{console.log("PaymentFlowEventsEnum.FailedToLoad")}),e.hK.addListener(e.I.Completed,()=>{this.processFlow="willReady",console.log("PaymentFlowEventsEnum.Completed")}),e.hK.addListener(e.I.Canceled,()=>{this.processFlow="willReady",console.log("PaymentFlowEventsEnum.Canceled")}),e.hK.addListener(e.I.Failed,()=>{this.processFlow="willReady",console.log("PaymentFlowEventsEnum.Failed")}),e.hK.addListener(e.I.Created,t=>{console.log(t),this.processFlow="canConfirm"}),e.hK.addListener(e.YT.Loaded,()=>{this.processApplePay="Ready",console.log("ApplePayEventsEnum.Loaded")}),e.hK.addListener(e.YT.FailedToLoad,()=>{console.log("ApplePayEventsEnum.FailedToLoad")}),e.hK.addListener(e.YT.Completed,()=>{this.processApplePay="willReady",console.log("ApplePayEventsEnum.Completed")}),e.hK.addListener(e.YT.Canceled,()=>{this.processApplePay="willReady",console.log("ApplePayEventsEnum.Canceled")}),e.hK.addListener(e.YT.Failed,()=>{this.processApplePay="willReady",console.log("ApplePayEventsEnum.Failed")}),e.hK.addListener(e.YT.DidCreatePaymentMethod,t=>{console.log(["ApplePayEventsEnum.DidCreatePaymentMethod",t.hasOwnProperty("contact")])}),e.hK.addListener(e.YT.DidSelectShippingContact,t=>{console.log(["ApplePayEventsEnum.DidSelectShippingContact",t.hasOwnProperty("contact")])}),e.hK.addListener(e.uA.Loaded,()=>{this.processGooglePay="Ready",console.log("GooglePayEventsEnum.Loaded")}),e.hK.addListener(e.uA.FailedToLoad,()=>{console.log("GooglePayEventsEnum.FailedToLoad")}),e.hK.addListener(e.uA.Completed,()=>{this.processGooglePay="willReady",console.log("GooglePayEventsEnum.Completed")}),e.hK.addListener(e.uA.Canceled,()=>{this.processGooglePay="willReady",console.log("GooglePayEventsEnum.Canceled")}),e.hK.addListener(e.uA.Failed,()=>{this.processGooglePay="willReady",console.log("GooglePayEventsEnum.Failed")}),e.hK.isApplePayAvailable().then(()=>this.isApplePayAvailable=!0).catch(()=>{}),e.hK.isGooglePayAvailable().then(()=>this.isGooglePayAvailable=!0).catch(()=>{}),this.isGooglePayAvailable=!0})}createPaymentSheet(t=!0){return(0,r.mG)(this,void 0,void 0,function*(){if(t){const{paymentIntent:o,ephemeralKey:l,customer:c}=yield m(this.http.post(p.N.api+"/stripe/createPaymentIntent",{}));console.log("__________ paymentIntent: ",o),console.log("__________ customer: ",c),console.log("__________ ephemeralKey: ",l),yield e.hK.createPaymentSheet({paymentIntentClientSecret:o,customerEphemeralKeySecret:l,customerId:c,merchantDisplayName:"Sambhab"});const y=this.presentPaymentSheet();console.log("__________ result: ",y)}else{const{paymentIntent:o}=yield m(this.http.post(p.N.api+"intent/without-customer",{}));console.log("__________ paymentIntent: ",o),yield e.hK.createPaymentSheet({paymentIntentClientSecret:o,merchantDisplayName:"Sambhab",enableGooglePay:!0,GooglePayIsTesting:!0});const l=this.presentPaymentSheet();console.log("__________ result: ",l)}})}presentPaymentSheet(){return e.hK.presentPaymentSheet()}createApplePay(){return(0,r.mG)(this,void 0,void 0,function*(){const{paymentIntent:t}=yield m(this.http.post(p.N.api+"/stripe/createPaymentIntent",{}));yield e.hK.createApplePay({paymentIntentClientSecret:t,paymentSummaryItems:[{label:"Product Name",amount:1099}],merchantIdentifier:"merchant.com.getcapacitor.stripe",requiredShippingContactFields:["postalAddress","phoneNumber","emailAddress","name"],countryCode:"IN",currency:"INR"})})}presentApplePay(){return e.hK.presentApplePay()}createGooglePay(){return(0,r.mG)(this,void 0,void 0,function*(){const{paymentIntent:t}=yield m(this.http.post(p.N.api+"/stripe/createPaymentIntent",{}));yield e.hK.createGooglePay({paymentIntentClientSecret:t,paymentSummaryItems:[{label:"Product Name",amount:1099}],merchantIdentifier:"merchant.com.getcapacitor.stripe",countryCode:"IN",currency:"INR"})})}presentGooglePay(){return(0,r.mG)(this,void 0,void 0,function*(){return e.hK.presentGooglePay()})}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(g.eN))},i.\u0275cmp=n.Xpm({type:i,selectors:[["stripe-payment-capacitorjs"]],standalone:!0,features:[n.jDz],decls:10,vars:3,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["button","true","detail","true",3,"disabled","click"]],template:function(t,o){1&t&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),n._UZ(3,"ion-menu-button"),n.qZA(),n._UZ(4,"ion-title"),n.qZA()(),n.TgZ(5,"ion-content",2)(6,"ion-list")(7,"ion-item",3),n.NdJ("click",function(){return o.createPaymentSheet()}),n.TgZ(8,"ion-label"),n._uU(9,"Card Payment"),n.qZA()()()()),2&t&&(n.Q6J("translucent",!0),n.xp6(5),n.Q6J("fullscreen",!0),n.xp6(2),n.Q6J("disabled","willReady"!==o.processSheet))},dependencies:[s.Pc,s.Sm,s.W2,s.Gu,s.Ie,s.Q$,s.q_,s.fG,s.wd,s.sr]}),i})()}]}}]);