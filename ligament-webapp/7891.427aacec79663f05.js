"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7891],{7891:(A,g,r)=>{r.r(g),r.d(g,{PaymentPageModule:()=>R});var p=r(6895),S=r(433),u=r(8408),k=r(7551),e=r(8274);const l={PROJECT_NAME:"Paytm Blink Checkout JS",ENV:{PROD:"PROD",STAGE:"STAGE"},HOSTS:{PROD:"https://securegw.paytm.in",STAGE:"https://securegw-stage.paytm.in"},LINKS:{CHECKOUT_JS_URL:"/merchantpgpui/checkoutjs/merchants/"},ERRORS:{INIT:"An error during initialization!",INVOKE:"An error during invoking!",MERCHANT_ID_NOT_FOUND:"Please provide merchant id!",CHECKOUT_NOT_AVAILABLE:"Checkout JS library not found. Please make sure you have included checkout js!",INVALID_CHECKOUT_JS_INSTANCE:"Invalid instance provided!"},IDS:{CHECKOUT_ELEMENT:"checkout-wrapper-"}};Object.keys(l.ERRORS).forEach(i=>{l.ERRORS[i]=`${l.PROJECT_NAME}: ${l.ERRORS[i]}`});const a=l,I=new e.OlP("Window",{providedIn:"root",factory:()=>window});var y=r(7579),P=r(6063);class T extends y.x{constructor(o=1/0,t=1/0,n=P.l){super(),this._bufferSize=o,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,o),this._windowTime=Math.max(1,t)}next(o){const{isStopped:t,_buffer:n,_infiniteTimeWindow:c,_timestampProvider:s,_windowTime:h}=this;t||(n.push(o),!c&&n.push(s.now()+h)),this._trimBuffer(),super.next(o)}_subscribe(o){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(o),{_infiniteTimeWindow:n,_buffer:c}=this,s=c.slice();for(let h=0;h<s.length&&!o.closed;h+=n?1:2)o.next(s[h]);return this._checkFinalizedStatuses(o),t}_trimBuffer(){const{_bufferSize:o,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:c}=this,s=(c?1:2)*o;if(o<1/0&&s<n.length&&n.splice(0,n.length-s),!c){const h=t.now();let m=0;for(let d=1;d<n.length&&n[d]<=h;d+=2)m=d;m&&n.splice(0,m+1)}}}class f{constructor(o,t,n){this.env=o,this.openInPopup=t,this.checkoutJsInstance=n}static from(o){return new f((o=o||{}).env||a.ENV.PROD,"boolean"!=typeof o.openInPopup||o.openInPopup,o.checkoutJsInstance)}}let C=(()=>{class i{constructor(t,n){this.window=t,this.document=n,this.openInPopup=!0,this.isScriptLoaded=!1,this.isScriptLoading=!1,this.checkoutJsContainerId=a.IDS.CHECKOUT_ELEMENT+(new Date).getTime(),this.checkoutJsInstanceSource$=new T(1),this.checkoutJsInstance$=this.checkoutJsInstanceSource$.asObservable(),this.setupCheckoutJs=()=>{const c=this.getCheckoutJsObj();c&&c.onLoad&&c.onLoad(()=>{this.isScriptLoaded=!0,this.isScriptLoading=!1,this.initializeCheckout()})},this.initializeCheckout=()=>{const c=this.getCheckoutJsObj();c&&c.init&&c.invoke?c.init(Object.assign(Object.assign({},this.config),{root:this.openInPopup?"":`#${this.checkoutJsContainerId}`})).then(s=>{this.checkoutJsInstanceSource$.next(c)}).catch(s=>{console.error(a.ERRORS.INIT,s)}):console.error(a.ERRORS.INVALID_CHECKOUT_JS_INSTANCE)}}init(t,n){n=f.from(n);const c=t&&t.merchant&&t.merchant.mid;if(c){const s=this.config&&this.config.merchant&&this.config.merchant.mid;this.config=t,this.openInPopup=n.openInPopup,n.checkoutJsInstance&&(this.receivedCheckoutJsInstance=n.checkoutJsInstance,this.checkoutJsInstanceSource$.next(n.checkoutJsInstance)),(n.checkoutJsInstance||this.isScriptLoaded)&&c===s?this.initializeCheckout():(!this.isScriptLoading||s&&c!==s)&&this.loadCheckoutScript(c,n.env)}else console.error(a.ERRORS.MERCHANT_ID_NOT_FOUND)}loadCheckoutScript(t,n){this.isScriptLoaded=!1,this.isScriptLoading=!0;const c=this.document.createElement("script");c.async=!0,c.src=a.HOSTS[n]+a.LINKS.CHECKOUT_JS_URL.concat(t),c.type="application/javascript",c.onload=this.setupCheckoutJs,c.onError=()=>{this.isScriptLoading=!1},this.document.body.appendChild(c)}getCheckoutJsObj(){const t=this.window;return this.receivedCheckoutJsInstance?this.receivedCheckoutJsInstance:t&&t.Paytm&&t.Paytm.CheckoutJS?t.Paytm.CheckoutJS:(console.warn(a.ERRORS.CHECKOUT_NOT_AVAILABLE),null)}ngOnDestroy(){this.checkoutJsInstanceSource$.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(I),e.LFG(p.K0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var O=r(727);let J=(()=>{class i{constructor(t){this.checkoutService=t,this.subs=new O.w0}ngAfterViewInit(){this.subs=this.checkoutService.checkoutJsInstance$.subscribe(this.invoke)}invoke(t){if(t&&t.invoke)try{t.invoke()}catch(n){console.error(a.ERRORS.INVOKE,n)}}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["paytm-checkout"]],decls:3,vars:1,consts:[[3,"id"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1,"jitu"),e._UZ(2,"div"),e.qZA()),2&t&&e.Q6J("id",n.checkoutService.checkoutJsContainerId)},encapsulation:2}),i})(),v=(()=>{class i{transform(t,n=0){return JSON.stringify(t,null,n)||""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"stringifyJson",type:i,pure:!0}),i})();function _(i,o){1&i&&e._UZ(0,"paytm-checkout")}const b=[{path:"",component:(()=>{class i{constructor(t){this.checkoutService=t,this.config={flow:"DEFAULT",merchant:{mid:"INTEGR77698636129383",name:"Nitin Khan D'souza",logo:"",redirect:!0},style:{},jsFile:"",data:{orderId:"integration_20230727123933",amount:"1",token:"c319380da4b74535b9bb56fa7152918b1690441774945",tokenType:"TXN_TOKEN",userDetail:{mobileNumber:"",name:""}},mapClientMessage:{},labels:{},payMode:{labels:{},filter:{exclude:[]},order:["NB","CARD","LOGIN"]}},this.isCheckoutVisible=!1,this.openInPopup=!0,this.notifyMerchantHandler=(n,c)=>{console.log("MERCHANT NOTIFY LOG",n,c)},this.initializeCheckout()}ngOnInit(){}appendHandler(t){const n=Object.assign({},t);return n.handler={notifyMerchant:this.notifyMerchantHandler},n}updateConfig(t){try{this.config=JSON.parse(t)}catch(n){this.config=JSON.parse("")}}toggleCheckout(){this.isCheckoutVisible=!this.isCheckoutVisible}initializeCheckout(){const t=this.appendHandler(this.config);this.checkoutService.init(t,{env:"STAGE",openInPopup:this.openInPopup})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-payment"]],decls:25,vars:9,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],[1,"ionCardContainer"],["cols","50","rows","25",3,"value","blur"],["type","button",3,"click"],["type","checkbox",3,"checked","change"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e._UZ(4,"ion-title"),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"div",3)(7,"textarea",4),e.NdJ("blur",function(s){return n.updateConfig(s.target.value)}),e.ALo(8,"stringifyJson"),e._uU(9,"    "),e.qZA(),e.TgZ(10,"div")(11,"button",5),e.NdJ("click",function(){return n.toggleCheckout()}),e._uU(12," Toggle Checkout Screen "),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"button",5),e.NdJ("click",function(){return n.initializeCheckout()}),e._uU(15," Re-render with updated config "),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"input",6),e.NdJ("change",function(){return n.openInPopup=!n.openInPopup,n.initializeCheckout()}),e.qZA(),e._uU(18," Open in popup "),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"div")(21,"b"),e._uU(22,"CHECKOUT VISIBILITY :"),e.qZA(),e._uU(23),e.qZA(),e.YNc(24,_,1,0,"paytm-checkout",7),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("value",e.xi3(8,6,n.config,4)),e.xp6(10),e.Q6J("checked",n.openInPopup),e.xp6(6),e.hij(" ",n.isCheckoutVisible,""),e.xp6(1),e.Q6J("ngIf",n.isCheckoutVisible))},dependencies:[p.O5,u.Sm,u.W2,u.Gu,u.fG,u.wd,u.sr,J,v]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[k.Bz.forChild(b),k.Bz]}),i})(),N=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez]}),i})(),R=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,S.u5,u.Pc,E,N]}),i})()}}]);